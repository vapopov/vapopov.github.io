<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Base usefull commands  &middot; ┬──┬﻿ ノ( ゜-゜ノ) (╯°□°）╯︵ ┻━┻</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="" />

<meta name="keywords" content="bash, rsync, redis, ">


<meta property="og:title" content="Base usefull commands  &middot; ┬──┬﻿ ノ( ゜-゜ノ) (╯°□°）╯︵ ┻━┻ ">
<meta property="og:site_name" content="┬──┬﻿ ノ( ゜-゜ノ) (╯°□°）╯︵ ┻━┻"/>
<meta property="og:url" content="/2017/07/21/base-usefull-commands/" />
<meta property="og:locale" content="en">


<meta property="og:type" content="article" />
<meta property="og:description" content=""/>
<meta property="og:article:published_time" content="2017-07-21T07:35:01&#43;02:00" />
<meta property="og:article:modified_time" content="2017-07-21T07:35:01&#43;02:00" />

  
    
<meta property="og:article:tag" content="bash">
    
<meta property="og:article:tag" content="rsync">
    
<meta property="og:article:tag" content="redis">
    
  

  

  



<link rel="canonical" href="/2017/07/21/base-usefull-commands/" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/touch-icon-144-precomposed.png">
<link rel="icon" href="/favicon.png">
<meta name="generator" content="Hugo 0.25.1" />

  <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.2/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->



    <link rel="stylesheet" href="/css/bootswatch/cosmo/bootstrap.min.css">


<link rel="stylesheet" href="/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/style.css">




  <link rel="stylesheet" href="/css/highlight/default.css">


</head>
<body class="map[name:cosmo]" data-ng-app="myapp" data-ng-controller="MyController" data-ng-mouseleave="MouseLeave($event)">
    <header id="main-header">
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        
        <a class="navbar-brand" href="/">
          ┬──┬﻿ ノ( ゜-゜ノ) (╯°□°）╯︵ ┻━┻
          
          
          </a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            
            
            <li class="">

              <a href="/" >
                <i class='fa fa-road'></i>
                About
              </a>
            </li>
            
            <li class="">

              <a href="/post/" >
                
                Blog
              </a>
            </li>
            
            <li class="">

              <a href="/" >
                
                Dashboard
              </a>
            </li>
            
            <li class="">

              <a href="/showcase/" >
                
                Showcase
              </a>
            </li>
            
            
              
          </ul>
        </div>
        
      </div>
    </nav>
  </header>


<div class="container">
  <div class="row">
    <div class="col-sm-9">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
  <div class="text-center">

    <h1>Base usefull commands
</h1>

    <div class="metas">
<small>
  <i class="fa fa-calendar"></i>
  <time datetime="2017-07-21">21 Jul, 2017</time>
</small>


  <small>
  &middot; Read in about 2 min
  &middot; (364 words)
  &middot; 
<span class="share-box">Share this on:
    <a href="https://www.facebook.com/sharer/sharer.php?u=%2f2017%2f07%2f21%2fbase-usefull-commands%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-facebook-official "></i></a>

    <a href="https://twitter.com/intent/tweet?text=Base%20usefull%20commands&amp;url=%2f2017%2f07%2f21%2fbase-usefull-commands%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-twitter"></i></a>

    <a href="https://plus.google.com/share?url=%2f2017%2f07%2f21%2fbase-usefull-commands%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-google-plus"></i></a>

    <a href="http://www.reddit.com/submit?url=%2f2017%2f07%2f21%2fbase-usefull-commands%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-reddit"></i></a>

    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2f2017%2f07%2f21%2fbase-usefull-commands%2f&amp;title=Base%20usefull%20commands" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-linkedin"></i></a>

    <a href="mailto:?subject=Base%20usefull%20commands&amp;body=Check out this site %2f2017%2f07%2f21%2fbase-usefull-commands%2f" data-proofer-ignore=""><i class="fa fa-envelope"></i></a>
  </span>

  </small>

<div class="margin-10">
  <i class="fa fa-tags"></i>
  
  <a href="/tags/bash" class="label label-primary">bash</a>
  
  <a href="/tags/rsync" class="label label-primary">rsync</a>
  
  <a href="/tags/redis" class="label label-primary">redis</a>
  


</div>

<br>
</div>

  </div>
</div>

      <div class="content">
  

<h2 id="redis-multi-actions">Redis multi actions</h2>

<p>Remove values by pattern</p>

<pre><code class="language-bash">redis-cli -h dev-1.example.com EVAL &quot;local keys = redis.call('keys', ARGV[1])
for i=1,#keys,5000 do
  redis.call('del', unpack(keys, i, math.min(i+4999, #keys))) 
end 
return keys&quot; 0 pattern:*
</code></pre>

<p>Check TTL by pattern</p>

<pre><code class="language-bash">redis-cli -h dev-1.example.com EVAL &quot;
local ttls = {}
for i, name in ipairs(redis.call('KEYS', ARGV[1])) do 
  ttls[i] = {redis.call('ttl', name), name}; 
end
return ttls&quot; 0 *pattern*
</code></pre>

<h2 id="rsync">Rsync</h2>

<h3 id="create-and-transfer-archive-directly-to-the-remote-host">Create and transfer archive directly to the remote host</h3>

<pre><code class="language-bash">$ tar -zc ./path | ssh user@remote.host &quot;cat &gt; ~/file.tar.gz&quot;
$ tar -zc ./path | ssh user@remote.host &quot;tar -zx -C /destination&quot;
</code></pre>

<h3 id="transfer-data-with-excluding-files-by-pattern">Transfer data with excluding files by pattern</h3>

<pre><code class="language-bash">rsync -e ssh -azv --exclude 'exclude.py' user@example.com:/var/www/example.com/ /var/www/example.com/
</code></pre>

<h3 id="sync-files-and-directory-locally">Sync files and directory locally</h3>

<pre><code class="language-bash">$ rsync -zvh backup.tar /tmp/backups/
created directory /tmp/backups
backup.tar
sent 14.71M bytes  received 31 bytes  3.27M bytes/sec
total size is 16.18M  speedup is 1.10
</code></pre>

<p>-z, &ndash;compress          compress file data during the transfer
-v, &ndash;verbose           increase verbosity
-h, &ndash;human-readable    output numbers in a human-readable format</p>

<h3 id="rsync-over-ssh">Rsync Over SSH</h3>

<p>To specify a protocol with rsync you need to give “-e” option with protocol name you want to use. Here in this example, We will be using “ssh” with “-e” option and perform data transfer.</p>

<pre><code class="language-bash">$ rsync -azv -e ssh fahlo@store-staging.fahlo.me:/var/www/store.fahlo.me /var/www/store.fahlo.me
</code></pre>

<p>-a, &ndash;archive           archive mode; equals -rlptgoD (no -H,-A,-X), recursive, links, permissions, group, owner, devices
-z, &ndash;compress          compress file data during the transfer
-v, &ndash;verbose           increase verbosity
-h, &ndash;human-readable    output numbers in a human-readable format</p>

<h3 id="use-of-include-and-exclude-options">Use of –include and –exclude Options</h3>

<p>These two options allows us to include and exclude files by specifying parameters with these option helps us to specify those files or directories which you want to include in your sync and exclude files and folders with you don’t want to be transferred.</p>

<pre><code class="language-bash">$ rsync -avze ssh --include 'R*' --exclude '*' root@192.168.0.101:/var/lib/rpm/ /root/rpm
</code></pre>

<h3 id="use-of-delete-option">Use of –delete Option</h3>

<p>If a file or directory not exist at the source, but already exists at the destination, you might want to delete that existing file/directory at the target while syncing .</p>

<p>We can use ‘–delete‘ option to delete files that are not there in source directory.</p>

<pre><code class="language-bash">$ rsync -avz --delete root@192.168.0.100:/var/lib/rpm/ .
</code></pre>

<h3 id="automatically-delete-source-files-after-successful-transfer-with-dry-run">Automatically Delete source Files after successful Transfer (with &ndash;dry-run)</h3>

<pre><code class="language-bash">$ rsync --dry-run --remove-source-files -zvh backup.tar /tmp/backups/
</code></pre>

</div>


      <footer>
  
<span class="share-box">Share this on:
    <a href="https://www.facebook.com/sharer/sharer.php?u=%2f2017%2f07%2f21%2fbase-usefull-commands%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-facebook-official "></i></a>

    <a href="https://twitter.com/intent/tweet?text=Base%20usefull%20commands&amp;url=%2f2017%2f07%2f21%2fbase-usefull-commands%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-twitter"></i></a>

    <a href="https://plus.google.com/share?url=%2f2017%2f07%2f21%2fbase-usefull-commands%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-google-plus"></i></a>

    <a href="http://www.reddit.com/submit?url=%2f2017%2f07%2f21%2fbase-usefull-commands%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-reddit"></i></a>

    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2f2017%2f07%2f21%2fbase-usefull-commands%2f&amp;title=Base%20usefull%20commands" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-linkedin"></i></a>

    <a href="mailto:?subject=Base%20usefull%20commands&amp;body=Check out this site %2f2017%2f07%2f21%2fbase-usefull-commands%2f" data-proofer-ignore=""><i class="fa fa-envelope"></i></a>
  </span>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      
  
    <nav><ul class="pager">
    
        <li class="previous">
          <a href="/2017/07/21/server-optimisation-for-nginx/" title="Server optimisation for nginx">
            <span aria-hidden="true">&larr;</span>Previous
          </a>
        </li>
    

    
      <li class="next">
        <a href="/2017/08/12/query-planner/" title="Query Planner">
            Next <span aria-hidden="true">&rarr;</span>
        </a>
      </li>
    
    </ul> </nav>
  


</div>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
  
<div id="disqus_thread"></div>
<script type="text/javascript">
  (function() {
    
    
    if (window.location.hostname == "localhost")
      return;

    var dsq = document.createElement('script'); dsq.async = true; dsq.type = 'text/javascript';
    dsq.src = '//vpopov.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


</div>

</footer>

    </div>
    
      <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
        <div>
  

    <div class="section">
      <header><div class="title"><b>Latest Posts</b></div></header>
      <div class="content">
        <ul>
        
          <li>
          <a href="/2017/08/12/git-gpg-verification/">Git Gpg Verification</a>
          </li>
        
          <li>
          <a href="/2017/08/12/query-planner/">Query Planner</a>
          </li>
        
          <li>
          <a href="/2017/07/21/base-usefull-commands/">Base usefull commands</a>
          </li>
        
          <li>
          <a href="/2017/07/21/server-optimisation-for-nginx/">Server optimisation for nginx</a>
          </li>
        
          <li>
          <a href="/2017/07/20/welcome/">Welcome</a>
          </li>
        
        </ul>
      </div>
    </div>

    
      
      
      <div class="section taxonomies">
        <header><div class="title"><b>tag</b></div></header>

        <div class="content">
          <ul>
            <li><a href="/tags/bash">bash</a></li><li><a href="/tags/git">git</a></li><li><a href="/tags/gpg">gpg</a></li><li><a href="/tags/linux">linux</a></li><li><a href="/tags/nginx">nginx</a></li><li><a href="/tags/pg">pg</a></li><li><a href="/tags/redis">redis</a></li><li><a href="/tags/rsync">rsync</a></li><li><a href="/tags/sql">sql</a></li><li><a href="/tags/sysctl">sysctl</a></li>
          </ul>
        </div>
      </div>
      
    
      
      
    

</div>

      </div>
    
  </div>
</div>
    
<footer class="footer hidden-print">
  <div class="container">
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
           <div class="pull-left">
  <a class="toplink" href="javascript:" id="return-to-top">back to top</a>
</div>
<div class="pull-right">

<a href="/disclaimer/">Disclaimer</a> <i>&middot;</i>

<a href="/terms/">Terms</a> 

</div>

        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center">
              
    
<div class="container footline">
    <small>
  code with <i class='fa fa-heart'></i>

</small>
</div>


    
<div class="container copyright">
    <small>
  2017 &copy;

  </small>
</div>



        </div>
    </div>
  </div>
</footer>

    

<script src="/js/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>

<script src="/js/angular.min.js"></script>
<script src="/js/popover/angular-storage.min.js"></script>
<script src="/js/highlight.pack.js"></script>
<script src="/js/site.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<script>
  var _gaq=[['_setAccount','UA-103006315-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

<script>
var ENABLE_POPOVER =  false , 
EXPIRE_COOKIE =  5 , 
SHOW_MODAL_TIMEOUT =  10000 , 
MOUSE_LEAVE =  true , 
MODAL_SIZE = "", 
POST_URL = "https://zapier.com/hooks/...", 
SIGNUP_HEADER = "Join Our Newsletter",
HEADER_IMAGE = " ",
IMG_DESCRIPTION = "Placeholder image for this popover modal optin form",
SIGNUP_TEXT = "Signup today for free and be the first to get notified on new updates.",
INPUT_PLACEHOLDER = "Enter your email",
SUBMIT_BUTTON = "Subscribe",
SUCCESS_MESSAGE = "Thanks for your subscription!",
ERROR_MESSAGE = "Submitting form failed!",
OPTIN =  true ,
COOKIE_NAME = "zion",
CONTENTLANGUAGE = ""; 
</script>

<script src="/js/popover/angular-modal-service.min.js"></script>
<script src="/js/angular-ismobile.min.js"></script>
<script src="/js/popover/popover.min.js"></script>


<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax//MathJax.js"></script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax//config/TeX-AMS-MML_HTMLorMML.js"></script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[','\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    for(var all in MathJax.Hub.getAllJax()) {
        all.SourceElement().parentNode.className += ' has-jax';

    }
});
</script>






  </body>
</html>

